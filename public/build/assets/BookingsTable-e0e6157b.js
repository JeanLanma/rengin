import{d as w,o as c,e as p,a as e,t as l,l as j,x as $,r as v,y as L,b as d,w as i,F as S,h as T,u,f as B,j as b,g as _}from"./app-7e8cb945.js";import{S as f}from"./sweetalert2.all-c6e2a915.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const V={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},D={__name:"Dropdown",props:{title:{type:String,default:"Dropdown",required:!1}},setup(x){const r=x,g=w(!1);return(h,n)=>(c(),p("div",{class:"relative",onClickOutside:n[2]||(n[2]=y=>g.value=!1)},[e("button",{onClick:n[0]||(n[0]=y=>g.value=!g.value),class:"bg-sky-500 text-white px-6 py-2 rounded-lg rounded-b-none"},l(r.title),1),j(e("div",{onClick:n[1]||(n[1]=y=>g.value=!1),class:"absolute w-48 rounded-lg rounded-tl-none shadow-lg bg-white"},[e("div",V,[v(h.$slots,"default")])],512),[[$,g.value]])],32))}},I={},N={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"};function z(x,r){return c(),p("div",N,[v(x.$slots,"default")])}const k=O(I,[["render",z]]),M={class:"p-3 py-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},R=e("div",{class:"flex justify-between items-center mb-8"},[e("h1",{class:"text-2xl font-medium text-gray-900 dark:text-white mb-4"}," Ultimas reservaciones ")],-1),U=e("hr",null,null,-1),E=["href"],H=e("hr",null,null,-1),Q=["href"],G={class:"text-white inner-shadow shadow-xl overflow-auto border border-gray-200 dark:border-gray-700 md:rounded-lg"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 cursor-pointer"},K=e("thead",null,[e("tr",null,[e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"ID"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Huesped"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Check-In"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Check-Out"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Habitación"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Precio"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Creada el"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-right text-gray-500 dark:text-gray-400"},[e("svg",{class:"w-6 text-right fill-current text-grey-dark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"})])])])],-1),P={class:"bg-white divide-y shadow-inner divide-gray-200 dark:divide-gray-700 dark:bg-gray-900"},W={class:"dark:hover:bg-gray-600 hover:bg-gray-100"},X={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-base font-bold text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},Y={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},Z={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},A={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},ee={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},te={class:"text-xs text-gray-500/40 dark:text-gray-300/25"},re=e("br",null,null,-1),ae={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},se={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},oe={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},le=["onClick"],ne={key:1,class:"dark:hover:bg-gray-600 hover:bg-gray-100"},de=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-base font-bold text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),ie=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),ge=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),ce=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),pe=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),ye=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),xe=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},null,-1),ue=e("td",{class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},[e("a",{href:"#",class:"text-sky-600 dark:text-white hover:text-sky-700 hover:dark:text-gray-200 underline"},"Ver detalles")],-1),be=[de,ie,ge,ce,pe,ye,xe,ue],fe={key:0},he={class:"text-slate-50 font-bold text-xl flex flex-col justify-center items-center gap-4 rounded-xl p-2"},_e={class:"text-base dark:text-slate-50 text-slate-600"},ke={class:"flex p-2 w-full max-w-md justify-center space-x-0"},me=e("button",{innerText:"Previo"},null,-1),we=["innerText"],ve=e("button",{innerText:"Siguiente"},null,-1),je={__name:"BookingsTable",props:{bookings:{type:Object,required:!1},queryFilters:{type:Object,required:!1}},setup(x){const r=x,g=w({links:[],previusLinks:[],nextLinks:[]}),h=a=>{if(a.last_page<=1)return{links:[],previusLinks:[],nextLinks:[]};const s=[...a.links];s.unshift(),s.pop();const t=3;let o=[];a.current_page>=a.last_page?o=s.slice(a.current_page-t,a.current_page):o=s.slice(a.current_page,a.current_page+t);const q=s.slice(-1);return{links:s,previusLinks:o,nextLinks:q}},n=(a,s)=>{console.log(s),f.fire({title:"Agregar referencia interna para la reservación #"+a.id,input:"text",inputAttributes:{autocapitalize:"off",placeholder:"Referencia interna"},inputValue:s.internal_reference??"",showCancelButton:!0,confirmButtonText:"Confirmar",showLoaderOnConfirm:!0,inputValidator:t=>{if(!t)return"Necesita agregar una referencia interna"},preConfirm:async t=>fetch(route("bookings.reference",{booking:a.id,reference:t})).then(o=>{if(!o.ok)throw new Error(o.statusText);return o.json()}).catch(o=>{console.log(o),f.showValidationMessage(`La solicitud ha fallado: ${o}`)}),allowOutsideClick:()=>!f.isLoading()}).then(t=>{t.isConfirmed&&(console.log(t.value),f.fire({title:"La referencia ha sido agregada correctamente",icon:"success",confirmButtonColor:"#3085d6"}))})},y=(a,s)=>{const t=C(a,s);return route("bookings.index",t)},C=(a,s)=>({...s,...a}),m=a=>{const s={...a};delete s.page;const t=Object.keys(s).map(o=>encodeURIComponent(o)+"="+encodeURIComponent(s[o])).join("&");return t||""},F=a=>{switch(a){case"pending":return"Pendientes";case"confirmed":return"Confirmadas";case"canceled":return"Canceladas";default:return"Pendientes"}};return L(()=>{g.value=h(r.bookings)}),(a,s)=>(c(),p("div",null,[e("div",M,[R,d(D,{title:F(r.queryFilters.status)??"Pendientes"},{default:i(()=>[d(k,null,{default:i(()=>[d(u(b),{href:y({status:"pending"},r.queryFilters),only:["bookings","queryFilters"]},{default:i(()=>[_("Pendientes")]),_:1},8,["href"])]),_:1}),U,d(k,null,{default:i(()=>[e("a",{href:y({status:"confirmed"},r.queryFilters),only:["bookings","queryFilters"]},"Confirmadas",8,E)]),_:1}),H,d(k,null,{default:i(()=>[e("a",{href:y({status:"canceled"},r.queryFilters),only:["bookings","queryFilters"]},"Canceladas",8,Q)]),_:1})]),_:1},8,["title"]),e("div",G,[e("table",J,[K,e("tbody",P,[r.bookings.data.length>1?(c(!0),p(S,{key:0},T(r.bookings.data,t=>(c(),p("tr",W,[e("td",X,"# "+l(t.id),1),e("td",Y,l(t.guest.full_name),1),e("td",Z,l(t.check_in_formatted),1),e("td",A,l(t.check_out_formatted),1),e("td",ee,[_(l(t.room.type),1),e("span",te," x"+l(t.number_of_rooms),1),re,_(l(t.room.name),1)]),e("td",ae,l(t.total_price_formatted),1),e("td",se,l(t.created_at.split("T")[0]),1),e("td",oe,[e("p",{onClick:o=>n({id:t.id},t),class:"text-sky-600 dark:text-white hover:text-sky-700 hover:dark:text-gray-200 underline"},"Acciones",8,le)])]))),256)):(c(),p("tr",ne,be))])])]),r.bookings.links?(c(),p("section",fe,[e("div",he,[e("span",_e,"Mostrando "+l(r.bookings.per_page)+" por pagina de "+l(r.bookings.total)+" en total",1),e("div",ke,[d(u(b),{disabled:r.bookings.prev_page_url==null,as:"button",href:r.bookings.prev_page_url+"&"+m(r.queryFilters),class:"min-w-auto w-32 h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-l-xl hover:bg-sky-700 text-white font-semibold transition-all duration-200 ease-in-out border-y-2 border-l-2 flex justify-center items-center",preserveScroll:""},{default:i(()=>[me]),_:1},8,["disabled","href"]),d(u(b),{"aria-disabled":"true",disabled:"",href:"#",as:"button",class:"min-w-auto h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-none hover:bg-sky-700 text-white font-semibold hover:flex-grow transition-all duration-200 ease-in-out border-2 text-center flex justify-center items-center",preserveScroll:""},{default:i(()=>[e("button",{innerText:`pag. ${r.bookings.current_page}`},null,8,we)]),_:1}),d(u(b),{disabled:r.bookings.next_page_url==null,as:"button",href:r.bookings.next_page_url+"&"+m(r.queryFilters),class:"min-w-auto w-32 h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-r-xl hover:bg-sky-700 text-white font-semibold transition-all duration-200 ease-in-out overflow-hidden border-y-2 border-r-2 flex justify-center items-center",preserveScroll:""},{default:i(()=>[ve]),_:1},8,["disabled","href"])])])])):B("",!0)])]))}};export{je as default};
