import{d as w,s as C,x as L,o as c,e as g,a as e,t as n,l as S,y as $,r as F,b as d,w as i,F as B,h as O,u as y,f as T,j as f,g as k,O as z}from"./app-d133f549.js";import{S as b}from"./sweetalert2.all-3e2113d4.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const M={class:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},V={__name:"Dropdown",props:{title:{type:String,default:"Dropdown",required:!1}},setup(u){const r=u,p=w(!1);C(()=>{document.addEventListener("click",h)}),L(()=>{document.removeEventListener("click",h)});const h=x=>{x.target.closest(".relative")||(p.value=!1)};return(x,l)=>(c(),g("div",{class:"relative",onClickOutside:l[2]||(l[2]=_=>p.value=!1)},[e("button",{onClick:l[0]||(l[0]=_=>p.value=!p.value),class:"bg-sky-500 text-white px-6 py-2 rounded-lg rounded-b-none"},n(r.title),1),S(e("div",{onClick:l[1]||(l[1]=_=>p.value=!1),class:"absolute w-48 rounded-lg rounded-tl-none shadow-lg bg-white"},[e("div",M,[F(x.$slots,"default")])],512),[[$,p.value]])],32))}},I={},R={class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"};function N(u,r){return c(),g("div",R,[F(u.$slots,"default")])}const m=D(I,[["render",N]]),E={class:"p-3 py-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},U=e("div",{class:"flex justify-between items-center mb-8"},[e("h1",{class:"text-2xl font-medium text-gray-900 dark:text-white mb-4"}," Ultimas reservaciones ")],-1),H=e("hr",null,null,-1),Q=["href"],G=e("hr",null,null,-1),J=["href"],K={class:"text-white inner-shadow shadow-xl overflow-auto border border-gray-200 dark:border-gray-700 md:rounded-lg"},W={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 cursor-pointer"},X=e("thead",null,[e("tr",null,[e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"ID"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Huesped"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Check-In"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Check-Out"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Habitación"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Total"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Creada el"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-left text-gray-500 dark:text-gray-400"},"Ref. interna"),e("th",{class:"lg:px-4 px-6 lg:py-3.5 py-6 font-bold text-right text-gray-500 dark:text-gray-400"},[e("svg",{class:"w-6 text-right fill-current text-grey-dark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M4 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm6 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"})])])])],-1),Y={class:"bg-white divide-y shadow-inner divide-gray-200 dark:divide-gray-700 dark:bg-gray-900"},Z={class:"dark:hover:bg-gray-600 hover:bg-gray-100"},P={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-base font-bold text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},A={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},ee={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},te={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},re={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},se={class:"text-xs text-gray-500/40 dark:text-gray-300/25"},ae=e("br",null,null,-1),oe={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-green-500 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},ne={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},le={key:0,class:"font-bold lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},de=["onClick"],ie=e("div",{class:"flex"},[e("div",{class:"w-5 transform hover:text-indigo-500 hover:scale-110 flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})])]),e("p",null," agregar ")],-1),ce=[ie],ge={class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700"},pe=e("div",{class:"w-5 mr-2 transform hover:text-sky-500 hover:scale-110"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1),ue={key:1,class:"dark:hover:bg-gray-600 hover:bg-gray-100"},xe=e("td",{colspan:"9",class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-base font-bold text-left text-gray-500 dark:text-gray-300 whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700 text-center"},"Sin datos disponibles",-1),ye=[xe],fe={key:0},he={class:"text-slate-50 font-bold text-xl flex flex-col justify-center items-center gap-4 rounded-xl p-2"},_e={class:"text-base dark:text-slate-50 text-slate-600"},be={class:"flex p-2 w-full max-w-md justify-center space-x-0"},ke=e("button",{innerText:"Previo"},null,-1),me=["innerText"],ve=e("button",{innerText:"Siguiente"},null,-1),je={__name:"BookingsTable",props:{bookings:{type:Object,required:!1},queryFilters:{type:Object,required:!1}},setup(u){const r=u,p=w({links:[],previusLinks:[],nextLinks:[]}),h=s=>{if(s.last_page<=1)return{links:[],previusLinks:[],nextLinks:[]};const a=[...s.links];a.unshift(),a.pop();const t=3;let o=[];s.current_page>=s.last_page?o=a.slice(s.current_page-t,s.current_page):o=a.slice(s.current_page,s.current_page+t);const q=a.slice(-1);return{links:a,previusLinks:o,nextLinks:q}},x=(s,a)=>{console.log(a),b.fire({title:"Agregar referencia interna para la reservación #"+s.id,input:"text",inputAttributes:{autocapitalize:"off",placeholder:"Referencia interna"},inputValue:a.internal_reference??"",showCancelButton:!0,confirmButtonText:"Confirmar",showLoaderOnConfirm:!0,inputValidator:t=>{if(!t)return"Necesita agregar una referencia interna"},preConfirm:async t=>fetch(route("bookings.reference",{booking:s.id,reference:t})).then(o=>{if(!o.ok)throw new Error(o.statusText);return o.json()}).catch(o=>{console.log(o),b.showValidationMessage(`La solicitud ha fallado: ${o}`)}),allowOutsideClick:()=>!b.isLoading()}).then(t=>{t.isConfirmed&&(console.log(t.value),z.visit(route("bookings.index",r.queryFilters)),b.fire({title:"La referencia ha sido agregada correctamente",icon:"success",confirmButtonColor:"#3085d6"}))})},l=(s,a)=>{const t=_(s,a);return route("bookings.index",t)},_=(s,a)=>({...a,...s}),v=s=>{const a={...s};delete a.page;const t=Object.keys(a).map(o=>encodeURIComponent(o)+"="+encodeURIComponent(a[o])).join("&");return t||""},j=s=>{switch(s){case"pending":return"Pendientes";case"confirmed":return"Confirmadas";case"canceled":return"Canceladas";default:return"Pendientes"}};return C(()=>{p.value=h(r.bookings),console.log(r.bookings)}),(s,a)=>(c(),g("div",null,[e("div",E,[U,d(V,{title:"Reservaciones "+j(r.queryFilters.status)},{default:i(()=>[d(m,null,{default:i(()=>[d(y(f),{href:l({status:"pending"},r.queryFilters),only:["bookings","queryFilters"]},{default:i(()=>[k("Pendientes")]),_:1},8,["href"])]),_:1}),H,d(m,null,{default:i(()=>[e("a",{href:l({status:"confirmed"},r.queryFilters),only:["bookings","queryFilters"]},"Confirmadas",8,Q)]),_:1}),G,d(m,null,{default:i(()=>[e("a",{href:l({status:"canceled"},r.queryFilters),only:["bookings","queryFilters"]},"Canceladas",8,J)]),_:1})]),_:1},8,["title"]),e("div",K,[e("table",W,[X,e("tbody",Y,[r.bookings.data.length>1?(c(!0),g(B,{key:0},O(r.bookings.data,t=>(c(),g("tr",Z,[e("td",P,"# "+n(t.id),1),e("td",A,n(t.guest.full_name),1),e("td",ee,n(t.check_in_formatted),1),e("td",te,n(t.check_out_formatted),1),e("td",re,[k(n(t.room.type),1),e("span",se," x"+n(t.number_of_rooms),1),ae,k(n(t.room.name),1)]),e("td",oe,n(t.total_price_formatted),1),e("td",ne,n(t.created_at.split("T")[0]),1),t.internal_reference&&t.internal_reference!=""?(c(),g("td",le,n(t==null?void 0:t.internal_reference),1)):(c(),g("td",{key:1,onClick:o=>x({id:t.id},t),class:"lg:px-4 px-6 lg:py-4 py-6 lg:text-sm text-left whitespace-nowrap border-r border-r-gray-200 dark:border-r-gray-700 underline text-sky-500"},ce,8,de)),e("td",ge,[d(y(f),{href:s.route("bookings.show",{booking:t.id}),class:"flex gap-2"},{default:i(()=>[pe]),_:2},1032,["href"])])]))),256)):(c(),g("tr",ue,ye))])])]),r.bookings.links?(c(),g("section",fe,[e("div",he,[e("span",_e,"Mostrando "+n(r.bookings.per_page)+" por pagina de "+n(r.bookings.total)+" en total",1),e("div",be,[d(y(f),{disabled:r.bookings.prev_page_url==null,as:"button",href:r.bookings.prev_page_url+"&"+v(r.queryFilters),class:"min-w-auto w-32 h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-l-xl hover:bg-sky-700 text-white font-semibold transition-all duration-200 ease-in-out border-y-2 border-l-2 flex justify-center items-center",preserveScroll:""},{default:i(()=>[ke]),_:1},8,["disabled","href"]),d(y(f),{"aria-disabled":"true",disabled:"",href:"#",as:"button",class:"min-w-auto h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-none hover:bg-sky-700 text-white font-semibold hover:flex-grow transition-all duration-200 ease-in-out border-2 text-center flex justify-center items-center",preserveScroll:""},{default:i(()=>[e("button",{innerText:`pag. ${r.bookings.current_page}`},null,8,me)]),_:1}),d(y(f),{disabled:r.bookings.next_page_url==null,as:"button",href:r.bookings.next_page_url+"&"+v(r.queryFilters),class:"min-w-auto w-32 h-10 bg-sky-500 dark:bg-sky-500/50 p-2 rounded-r-xl hover:bg-sky-700 text-white font-semibold transition-all duration-200 ease-in-out overflow-hidden border-y-2 border-r-2 flex justify-center items-center",preserveScroll:""},{default:i(()=>[ve]),_:1},8,["disabled","href"])])])])):T("",!0)])]))}};export{je as default};
